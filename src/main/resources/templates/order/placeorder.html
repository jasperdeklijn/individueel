<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="~{fragments/basicFragments :: head}"></div>
    <title>Productpagina</title>
</head>
<body>
<div th:replace="~{fragments/basicFragments :: navbar}"></div>
<div class="container">
    <figure class="text-center">
        <blockquote class="blockquote">
            <h1 th:text="${product.productname}"></h1>
        </blockquote>
    </figure>
    <div class="row">
        <div class="col-md-6">
            <h2>Bevestig Bestelling</h2>
            <form action="#" th:action="@{/order/submit}" th:object="${orderItem}" method="post">
                <table class="table">
                    <thead class="table-light">
                        <tr>
                            <th>Product</th>
                            <th>Hoeveelheid</th>
                            <th>Prijs</th>
                        </tr>
                    </thead>
                     <tbody>
                         <tr>
                             <td th:text="${product.productname}">Product Name</td>
                             <td>
                                 <input min="1" th:max="${product.total - product.sold}" type="number" id="quantity" class="form-control" value="1"/>
                             </td>
                             <td th:text="${product.price}" th:data-price="${product.price}" id="price">price</td>
                         </tr>
                     </tbody>
                </table>
                <button class="btn btn-primary" type="submit">Bestel mar!</button>
            </form>

        </div>
    </div>

</div>
<script>
    function updatePrice() {
        var initialPrice = parseFloat($('#price').data('price'));
        // Get the quantity value from the input field
        var quantity = parseInt($('#quantity').val());
        // Calculate the new price
        var newPrice = initialPrice * quantity;
        // Update the price in the HTML element
        $('#price').text('â‚¬' + newPrice.toFixed(2));
    }
    $(document).ready(function() {
        // Call the updatePrice function when the quantity input changes
        $('#quantity').on('input', function() {
            updatePrice();
        });
    });

</script>
<div th:replace="~{fragments/basicFragments :: footer}"></div>
</body>
</html>